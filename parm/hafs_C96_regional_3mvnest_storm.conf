[config]
run_atm_mvnest=yes
#run_atm_mvnest=no
wave_model=ww3

run_ocean=no
ocean_model=hycom

run_atm_mvnest_ens=no
run_atm_init=no
run_atm_init_fgat=no
run_atm_init_ens=no
run_atm_merge=no
run_atm_merge_fgat=no
run_atm_merge_ens=no
run_atm_vi=no
run_atm_vi_fgat=no
run_atm_vi_ens=no
run_gsi=no
gsi_d01=no
gsi_d02=no
gsi_d03=no
run_analysis_merge=no
run_analysis_merge_ens=no
run_fgat=no
run_envar=no
run_ensda=no
run_enkf=no
run_wave=no

[dir]
PARMforecast={PARMhafs}/forecast/regional

[grid]
CASE=C96             ;; FV3 resolution
LEVS=65              ;; Model vertical levels
gtype=regional       ;; grid type: uniform, stretch, nest, or regional
gridfixdir=/let/hafs_grid/generate/grid
stretch_fac=1.0001   ;; Stretching factor for the grid
target_lon=-70.0  ;; center longitude of the highest resolution tile
target_lat={domlat}  ;; center latitude of the highest resolution tile
# Need for grid types: nest and regional
nest_grids=4
parent_grid_num=1,2,2,2
parent_tile=6,7,7,7
refine_ratio=3,3,3,3
#istart_nest=17,121
#jstart_nest=17,121
#iend_nest=176,360
#jend_nest=176,360

#istart_nest=17,101,201,201
#jstart_nest=17,21,161,301
#iend_nest=176,220,320,320
#jend_nest=176,140,280,420


istart_nest=17,271,141,11
jstart_nest=17,141,131,201
iend_nest=176,390,260,130
jend_nest=176,260,250,320


regional_esg=no

[grid_mvnest1res]
CASE_mvnest1res=C288
LEVS_mvnest1res={grid/LEVS}
gtype_mvnest1res={grid/gtype}
gridfixdir_mvnest1res=/let/hafs_grid/generate/grid_mvnest1res
stretch_fac_mvnest1res={grid/stretch_fac}
target_lon_mvnest1res={grid/target_lon}
target_lat_mvnest1res={grid/target_lat}
nest_grids_mvnest1res=1
parent_grid_num_mvnest1res=1
parent_tile_mvnest1res=6
refine_ratio_mvnest1res=3
istart_nest_mvnest1res=49
jstart_nest_mvnest1res=49
iend_nest_mvnest1res=528
jend_nest_mvnest1res=528
regional_esg_mvnest1res={grid/regional_esg}

[forecast]
# ccpp suites
ccpp_suite_regional=FV3_HAFS_v1_gfdlmp_tedmf
ccpp_suite_glob=FV3_HAFS_v1_gfdlmp_tedmf
ccpp_suite_nest=FV3_HAFS_v1_gfdlmp_tedmf

# nsst related namelist options
# Choose nstf_name=2,0,0,0,0 when nemsio type ictype
# Choose nstf_name=2,1,0,0,0 when grib2 type ictype
# Choose nstf_name=0,0,0,0,0 when ocean coupling is on
nstf_n1=2
nstf_n2=0
nstf_n3=0
nstf_n4=0
nstf_n5=0

#all_tasks=180
#atm_tasks=180
all_tasks=160
atm_tasks=160

dt_atmos=180
npx=241,181,181,181
npy=241,181,181,181
npz=64
k_split=2,3,3,3
n_split=5,10,10,10
layoutx=6,6,6,6
layouty=10,5,5,5

#io_layoutx=1,1,1
#io_layouty=1,1,1
io_layoutx=1
io_layouty=1

full_zs_filter=.true.,.true.,.true.,.true.
n_zs_filter=1,1,1,1
n_del2_weak=15,24,24,24
max_slope=0.25,0.25,0.25,0.25
rlmx=300.,300.,300.,300.
elmx=300.,300.,300.,300.
sfc_rlm=1,1,1,1
tc_pbl=0,0,0,0
shal_cnv=.true.,.true.,.true.,.true.
do_deep=.true.,.true.,.true.,.true.
#radiation scheme calling time steps
fhswr=1800.
fhlwr=1800.

# Moving nest related options
is_moving_nest=.false.,.true.,.true.,.true.
vortex_tracker=0,7,7,7
#vortex_tracker=0,1,1
ntrack=0,7,7,7
move_cd_x=0,1,0,1
move_cd_y=0,0,1,0

#restart_interval=""
restart_interval="3 6 9"

#quilting=.false.
#write_groups=0
#output_history=.false.

quilting=.true.
#write_groups=3
#num_files=3
write_groups=1
num_files=1
write_tasks_per_group=10
write_dopost=.false.

#output_history=.true.
#output_grid=regional_latlon
#output_grid_cen_lon={domlon}
#output_grid_cen_lat={domlat}
#output_grid_lon_span=84.0
#output_grid_lat_span=84.0
#output_grid_dlon=0.30
#output_grid_dlat=0.30

output_history=.true.
output_grid=regional_latlon,regional_latlon_moving,regional_latlon_moving,regional_latlon_moving
output_grid_cen_lon=-70.0,-60.3,-96.3,-96.3  ;; central longitude
output_grid_cen_lat={domlat},40.3,13.3,13.3  ;;central latitude
output_grid_lon_span=95.0,36.0,36.0,36.0         ;; output domain span for longitude in regular latlon coordinate system (in degrees)
output_grid_lat_span=84.0,36.0,36.0,36.0         ;; output domain span for latitude in regular latlon coordinate system (in degees)
output_grid_dlon=0.30,0.10,0.10,0.10             ;; output grid spacing dlon . . . .
output_grid_dlat=0.30,0.10,0.10,0.10             ;; output grid spacing dlat . . . .




[rocotostr]
#FORECAST_RESOURCES=FORECAST_RESOURCES_120PE
#FORECAST_RESOURCES=FORECAST_RESOURCES_180PE
#FORECAST_RESOURCES=FORECAST_RESOURCES_140PE
FORECAST_RESOURCES=FORECAST_RESOURCES_160PE
